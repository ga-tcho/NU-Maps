<!DOCTYPE html>
<html lang="ja">
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>NU Maps</title>
    <!-- BootstrapのCSS読み込み -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <!-- フォント -->
    <link href="https://fonts.googleapis.com/css?family=Londrina+Shadow" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@500&display=swap" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Londrina+Shadow" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@500&display=swap" rel="stylesheet" />
    <script src="js/jquery-1.5.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- BootstrapのJS読み込み -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/script.js"></script>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- default（Safariと同じ） / black（黒） / black-translucent（ステータスバーをコンテンツに含める） -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <!-- ホーム画面に表示されるアプリ名 -->
    <meta name="apple-mobile-web-app-title" content="NU-Maps" />
    <!-- ホーム画面に表示されるアプリアイコン -->
    <link rel="apple-touch-icon" href="images/img.png" />
    <script type="text/javascript" src="hum_icon.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="manifest" href="manifest.json" />
    <style>

    body{
     margin: 0;
    }
    .navi_item a{
     color: #fff; /*メニューの色*/
     text-decoration: none;
    }
    .mainView{
     width: 100vw;
     height: 100vh;
     background-color: #;
     padding-top: 65px;
    }
    /*ハンバーガーボタン*/
    .el_humburger {
     /* position: fixed; */
     /* top: 45px; */
     /* right: 60px; */
     width: 46px;
     height: 50px;
     padding-top: 1px;
     -webkit-box-sizing: border-box;
     box-sizing: border-box;
     padding-top: 20px;
     margin-right: 15px;
     z-index: 20;
     cursor: pointer;
     pointer-events: auto;
     color: #ffffff;
     text-align: center;
     }

    @media screen and (max-width: 840px) {
     .el_humburger {
       display: white;
       color: #ffffff;
       right: 0;
       top: 0;
       padding-top: 20px;
       width: 70px;
       height: 90px;
       margin-right: 0;
       }
       #factory .el_humburger {
         display: ; } }

    .el_humburger_wrapper {
     margin-bottom: 5px;
     width: 42px;
     display: inline-block; }

    @media screen and (max-width: 840px) {
     .el_humburger_wrapper {
       margin-bottom: 5px;
       width: 30px; } }

    .el_humburger_text {
     font-size: 12px;
     letter-spacing: 0.1em;
     font-family: "游ゴシック Medium", YuGothic, "Yu Gothic", "ヒラギノ角ゴ Pro", "Hiragino Kaku Gothic Pro", "メイリオ", Meiryo, sans-serif; }

    .js_humburgerOpen .el_humburger_text.el_humburger_text__menu {
     display: none; }

    .el_humburger_text.el_humburger_text__close {
     display: none; }

    .js_humburgerOpen .el_humburger_text.el_humburger_text__close {
     display: white; }

    @media screen and (max-width: 840px) {
     .el_humburger_text {
       font-size: 10px;
       padding-top: 2px; } }

    @media screen and (max-width: 840px) {
     .el_humburger_text svg path {
       -webkit-transition: all 2000ms cubic-bezier(0.16, 0.52, 0.25, 1);
       -o-transition: all 2000ms cubic-bezier(0.16, 0.52, 0.25, 1);
       transition: all 2000ms cubic-bezier(0.16, 0.52, 0.25, 1);
       fill: #fff; } }

    @media screen and (max-width: 840px) {
     .js_humburgerOpen .el_humburger_text svg path {
       fill: #fff; } }

    .el_humburger span.el_humburger_bar {
     display: block;
     width: 100%;
     margin: 0 auto 7.2px;  /*アイコンの太さ*/
     height: 3px;         /*アイコンの太さ*/
     background: #ffffff;
     -webkit-transition: all .2s ease-in-out;
     -o-transition: all .2s ease-in-out;
     transition: all .2s ease-in-out; }

    .el_humburger span.el_humburger_bar:last-child {
     margin-bottom: 0; }

    .js_humburgerOpen .el_humburger span.el_humburger_bar {
     background: #fff; }

    @media screen and (max-width: 840px) {
     .el_humburger span.el_humburger_bar {
       left: 0;
       top: 0;
       background: #fff; } } /*色変更*/

    .js_humburgerOpen .el_humburger span.el_humburger_bar.top {
     -webkit-transform: translateY(9px) rotate(-45deg);
     -ms-transform: translateY(9px) rotate(-45deg);
     transform: translateY(9px) rotate(-45deg); }

    .js_humburgerOpen .el_humburger span.el_humburger_bar.middle {
     opacity: 0; }

    .js_humburgerOpen .el_humburger span.el_humburger_bar.bottom {
     -webkit-transform: translateY(-11px) rotate(45deg);
     -ms-transform: translateY(-11px) rotate(45deg);
     transform: translateY(-11px) rotate(45deg); }

    .el_humburgerButton.el_humburgerButton__close {
     top: 2%;
     right: 2%; }

    .el_humburgerButton__close span.el_humburger_bar {
     display: block;
     width: 35px;
     margin: 0 auto;
     height: 4px;
     background: #fff; }

    .el_humburgerButton__close span.el_humburger_bar.top {
     -webkit-transform: translateY(5px) rotate(-45deg);
     -ms-transform: translateY(5px) rotate(-45deg);
     transform: translateY(5px) rotate(-45deg); }

    .el_humburgerButton__close span.el_humburger_bar.bottom {
     -webkit-transform: translateY(-6px) rotate(45deg);
     -ms-transform: translateY(-6px) rotate(45deg);
     transform: translateY(-6px) rotate(45deg); }

    .navi {
     position: fixed;
     right: 0;
     height: 100%;
     background-color: #4bacbb;
     width: 0;
     z-index: 3;
     padding-top: 100px;
     -webkit-box-sizing: border-box;
     box-sizing: border-box;
     -webkit-transition: all 100ms ease-out;
     -o-transition: all 100ms ease-out;
     transition: all 200ms ease-out;
     overflow: hidden; }
     .js_humburgerOpen .navi {
       width: 300px;
       z-index: 10;
       }
       @media screen and (max-width: 840px) {                                                                                                                                       e
         .js_humburgerOpen .navi {
           width: 100%;
           padding: 100px 5% 0; } }

    .navi_item {
     margin-bottom: 28px;
     font-size: 20px;
     color: white;
     /* font-family: "Marcellus", serif !important; */
     white-space: nowrap;
     /* margin-left: 90px; */
    }
     .navi_item.op_innerLink {
       cursor: pointer; }
     @media screen and (max-width: 840px) {
       .navi_item {
         margin-left: 0;
         font-size: 18px; } }
    </style>

    <script>
      navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
      function successCallback(position) {
        $('#lat').val(String(position.coords.latitude));
        $('#log').val(String(position.coords.longitude));
      }

      function errorCallback(error) {
        alert('名古屋大学駅を始点にします');
        $('#error').val('error');
      }
    </script>


  </head>


  <header>

      <div id="back11">
        <div onclick="clickBtn2()">
          <div id="back">
            <img src="images/icon/back-white.png" width="80%" />
          </div>
        </div>
        <!--
        <div id="hamburger">
          <div class="icon-animation type-1">
            <span class="top"></span>
            <span class="middle"></span>
            <span class="bottom"></span>
          </div>
        </div>
      -->
      <div class="navi"><!--ナビゲーション-->
        <div class="navi_inner">
          <div class="navi_item"><a href="https://note.com/preview/n881c652750db?prev_access_key=2ab72860573152d63224650e95683a41">About NU Maps</a></div>
          <div class="navi_item"><a href="index1.html">Contact</a></div>
          <div class="navi_item"><a href="index.html">Log in with NU ID</a></div>
          <div class="navi_item"><a href="http://www.nagoya-u.ac.jp/">Nagoya University Official Website</a></div>
        </div>
      </div>

        <a href="index.html" id="title">
          <img class="logo" src="images/logo-text.png" width="125px;" height="30px;" />
        </a>

        <div  class="el_humburger"><!--ハンバーガーボタン-->
           <div class="el_humburger_wrapper">
             <span class="el_humburger_bar top"></span>
             <span class="el_humburger_bar middle"></span>
             <span class="el_humburger_bar bottom"></span>
           </div>
         </div>
      </div>

  </header>

  <body>
    <div id="header"></div>

    <div class="mainView">
    <div id="labelCode_2" value="100"></div>
    <div id="floating-panel">
      <div class="present"></div>
      <div class="present_script" style="text-align: center">
        <div id="label5" style="font-size: 23px; margin-top:2px; margin-bottom:1px;" class="search-title" >Starting point</div>
      </div>
      <div class="present_selec">
        <select
          style="border-color: #bbb; margin-right: 15px; border-radius: 8px;"
          class="custom-select"
          id="start"
          name="building"
        >
          <option value="名古屋大学駅">Present location</option>
        </select>
      </div>
      <div class="destination"></div>
      <div class="destination_script" style="text-align: center">
        <div id="label6" style="font-size: 23px; margin-top: -140px; margin-bottom: 5px; color: #4bacbb" class="search-title">Destination</div>
      </div>
      <div class="destination_selec">
        <select style="border-color: #bbb; border-radius: 8px;" id="building" class="custom-select">
          <option value="">Select building</option>
          <option value="全学教育棟本館">全学教育棟本館</option>
          <option value="愛知県名古屋市千種区宮東町 全学教育棟A館">全学教育棟A館</option>
          <option value="名古屋大学 文系総合館">文系総合館</option>
          <option value="名古屋大学附属図書館">名古屋大学附属図書館</option>
          <option value="スターバックスコーヒー 名古屋大学附属図書館店">スターバックスコーヒー</option>
          <option value="名古屋大学 生協北部食堂">生協北部食堂</option>
          <option value="名古屋大学 生協南部書籍店">生協南部書籍店</option>
          <option value="豊田講堂">豊田講堂</option>
          <option value="名古屋大学 博物館">名古屋大学 博物館</option>
          <option value="ナショナルイノベーションコンプレックス">NIC</option>
          <option value="ファミリーマート 名古屋大学店">ファミリーマート 名古屋大学店</option>
          <option value="名古屋大学内郵便局">名古屋大学内郵便局</option>
          <option value="学生会館">学生会館</option>
          <option value="ＩＢ電子情報館">ＩＢ電子情報館</option>
          <option value="工学部1号館">工学部1号館</option>
        </select>
      </div>
      <div class="room_selec">
        <select style="border-color: #bbb; border-radius: 8px;" class="custom-select" id="room" name="room">
          <option value="">Select room</option>
        </select>
      </div>
      <div class="search">
        <button
          id="btn"
          style="background-color: #288FA3; width: 250px; margin-top: 60px; border-radius: 11px; border-width: 2px;"
          type="button"
          class="btn btn-outline-light"
          onclick="clickBtn1()"
        >
          <div id="label10" style="font-size: 25px; color: #fff" class="search-title">Search</div>
        </button>
      </div>
    </div>

    <div id="map"></div>
    <div id="lat" value=""></div>
    <div id="log" value=""></div>
    <div id="error" value=""></div>

    <script>
      //初期表示は非表示
      document.getElementById('floating-panel').style.display = 'block';

      function clickBtn1() {
        var end = document.getElementById('building').value;
        const p1 = document.getElementById('floating-panel');
        if (end == '') {
          alert('目的地が選択されていません。');
        } else if (end == '-') {
          alert('No destination selected');
        } else {
          if (p1.style.display == 'block') {
            // noneで非表示
            p1.style.display = 'none';
          } else {
            // blockで表示
            p1.style.display = 'block';
          }
        }
      }

      function clickBtn2() {
        const p1 = document.getElementById('floating-panel');
        if (p1.style.display == 'block') {
          location.href = 'index.html';
        } else {
          location.href = 'search.html';
        }
      }
    </script>

    <script>
      function testSelect() {
        if (document.getElementById('labelCode_2').value == '999') {
          document.getElementById('labelCode_2').value = '000';
          document.getElementById('label1').innerText = 'お知らせ';
          document.getElementById('label2').innerText = 'NU-Mapsの使い方';
          document.getElementById('label3').innerText = '言語/Language';
          document.getElementById('label4').innerText = 'ログイン';
          document.getElementById('label5').innerText = '現在地';
          document.getElementById('label6').innerText = '目的地';
          document.getElementById('building').value = '';
          document.getElementById('room').value = '';
          document.getElementById('start').value = '名古屋大学駅';
          document.getElementById('label10').innerText = '検索';
        } else {
          document.getElementById('labelCode_2').value = '999';
          document.getElementById('label1').innerText = 'News';
          document.getElementById('label2').innerText = 'How to use NU-Maps';
          document.getElementById('label3').innerText = '言語/Language';
          document.getElementById('label4').innerText = 'Login';
          document.getElementById('label5').innerText = 'Present location';
          document.getElementById('label6').innerText = 'Destination';
          document.getElementById('building').value = '-';
          document.getElementById('room').value = '-';
          document.getElementById('start').value = '名古屋大学駅/';
          document.getElementById('label10').innerText = 'Search';
        }

        return true;
      }

      function alert1() {
        alert('お問い合わせ機能実装予定');
      }

    </script>

    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCCf-1L_AYDveGBZ_a5cU3BjQx8r68Qjpo&callback=initMap"></script>
    <script>
      <!-- service workerの登録関係
      -->
      if
      ('serviceWorker'
      in
      navigator)
      {
      navigator.serviceWorker.register('service_worker.js').then(function (registration)
      {
      console.log('ServiceWorker
      registration
      successful
      with
      scope:
      ',
      registration.scope);
      }).catch(function (err)
      {
      console.log('ServiceWorker
      registration
      failed:
      ',
      err);
      });
      }
    </script>
    <script
    src="https://code.jquery.com/jquery-2.2.4.min.js"
    integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
    crossorigin="anonymous">
    </script>
    <script>
    //変数定義
    var navigationOpenFlag = false;
    var navButtonFlag = true;
    var focusFlag = false;

    //ハンバーガーメニュー
        $(function(){

          $(document).on('click','.el_humburger',function(){
            if(navButtonFlag){
              spNavInOut.switch();
              //一時的にボタンを押せなくする
              setTimeout(function(){
                navButtonFlag = true;
              },200);
              navButtonFlag = false;
            }
          });
          $(document).on('click touchend', function(event) {
            if (!$(event.target).closest('.bl_header,.el_humburger').length && $('body').hasClass('js_humburgerOpen') && focusFlag) {
              focusFlag = false;
              //scrollBlocker(false);
              spNavInOut.switch();
            }
          });
        });

    //ナビ開く処理
    function spNavIn(){
      $('body').removeClass('js_humburgerClose');
      $('body').addClass('js_humburgerOpen');
      setTimeout(function(){
        focusFlag = true;
      },200);
      setTimeout(function(){
        navigationOpenFlag = true;
      },200);
    }

    //ナビ閉じる処理
    function spNavOut(){
      $('body').removeClass('js_humburgerOpen');
      $('body').addClass('js_humburgerClose');
      setTimeout(function(){
        $(".uq_spNavi").removeClass("js_appear");
        focusFlag = false;
      },200);
      navigationOpenFlag = false;
    }

    //ナビ開閉コントロール
    var spNavInOut = {
      switch:function(){
        if($('body.spNavFreez').length){
          return false;
        }
        if($('body').hasClass('js_humburgerOpen')){
         spNavOut();
        } else {
         spNavIn();
        }
      }
    };
    </script>
  </body>
</html>
